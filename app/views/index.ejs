<!DOCTYPE html>
<html>
    <head>
        <title><%= title %></title>
        <!--link rel='stylesheet' href='/stylesheets/style.css' /-->
        <!-- Bootstrap -->
        <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">
        <link rel="stylesheet" href="stylesheets/style.css">
    </head>
    <body>
        <div class="container">
            <div class="row">
                <div class="col-xs-12">
                    <h1><%= title %></h1>
                    <h2>Sensors</h2>
                    <% for(var i = 0; i < sensors.length; i++) { %>
                    <h4 class="sensors"><%= sensors[i].name %>: <%= sensors[i].value %></h4>
                    <% } %>
                    <h2>Actors</h2>
                    <% for(var i = 0; i < actors.length; i++) { %>
                    <h4 class="actors"><%= actors[i].name %>: <%= actors[i].value %></h4>
                    <% } %>
                </div>
            </div>
            <div class="logger">
                <h3>Logger</h3>
                <p id="loggerMsg"></p>
            </div>
        </div>


        <script src="http://code.jquery.com/jquery-latest.min.js"></script>
        <script src="/socket.io/socket.io.js"></script>

        <script>
            $(function() {
                var socket = io.connect('/index');
                var sensors = $('.sensors');
                var actors = $('.actors');
                var logger = $('#loggerMsg');

                socket.on('status', function(data) {
                    console.log(data.sensors);
                    sensors.each(function(i, elem) {
                        $(elem).html(data.sensors[i].name + ': ' + data.sensors[i].value);
                    });
                    actors.each(function(i, elem) {
                        $(elem).html(data.actors[i].name + ': ' + data.actors[i].value);
                    });
                });

                socket.on('log', function(data) {
                    logger.html(logger.html() + data.msg);
                })
            });
        </script>
    </body>
</html>
